#include <stdio.h> 

int main() {
    int n; // 상품 종류 개수

    // 상품 개수 입력 (1~100 범위 검사)
    do {
        printf("상품 개수 입력 (1~100): ");
        scanf("%d", &n);
        if (n < 1 || n > 100) {
            printf("잘못된 입력입니다. 1에서 100 사이의 값을 입력하세요.\n");
        }
    } while (n < 1 || n > 100);

    int 입고[100];   // 상품별 입고 수량
    int 판매[100];   // 상품별 판매 수량
    int 재고[100];   // 최종 재고량 저장

    // 포인터 설정
    int *p입고 = 입고;
    int *p판매 = 판매;
    int *p재고 = 재고;

    // 입고 수량 입력 (0 이상 정수만 허용)
    printf("상품별 입고 수량 입력:\n");
    for (int i = 0; i < n; i++) {
        do {
            printf("상품 %d 입고 수량 (0 이상): ", i + 1);
            scanf("%d", (p입고 + i));
            if (*(p입고 + i) < 0) {
                printf("❌ 입고 수량은 음수가 될 수 없습니다. 다시 입력하세요.\n");
            }
        } while (*(p입고 + i) < 0);
    }

    // 판매 수량 입력 (0 이상, 입고 이하만 허용)
    printf("상품별 판매 수량 입력:\n");
    for (int i = 0; i < n; i++) {
        do {
            printf("상품 %d 판매 수량 (0 이상, 입고 %d 이하): ", i + 1, *(p입고 + i));
            scanf("%d", (p판매 + i));
            if (*(p판매 + i) < 0) {
                printf("❌ 판매 수량은 음수가 될 수 없습니다. 다시 입력하세요.\n");
            } else if (*(p판매 + i) > *(p입고 + i)) {
                printf("❌ 판매 수량이 입고 수량보다 많습니다. 다시 입력하세요.\n");
            }
        } while (*(p판매 + i) < 0 || *(p판매 + i) > *(p입고 + i));
    }

    // 재고 계산 (입고 - 판매)
    for (int i = 0; i < n; i++) {
        *(p재고 + i) = *(p입고 + i) - *(p판매 + i);
    }

    printf("\n[출력 결과]\n");

    // 모든 상품의 재고 수량 출력
    printf("재고수량: ");
    for (int i = 0; i < n; i++) {
        printf("%d ", *(p재고 + i));
    }
    printf("\n");

    // 전체 판매량 및 판매율 계산
    int 총입고 = 0, 총판매 = 0;
    for (int i = 0; i < n; i++) {
        총입고 += *(p입고 + i);
        총판매 += *(p판매 + i);
    }
    double 판매율 = (총입고 > 0) ? ((double)총판매 / 총입고) * 100 : 0.0;

    printf("총 판매량: %d (판매율 %.2f%%)\n", 총판매, 판매율);

    // 최대/최소 판매량 찾기
    int max판매 = *p판매, min판매 = *p판매;
    for (int i = 1; i < n; i++) {
        if (*(p판매 + i) > max판매) max판매 = *(p판매 + i);
        if (*(p판매 + i) < min판매) min판매 = *(p판매 + i);
    }

    // 최대 판매 상품 출력 (여러 개 가능)
    printf("가장 많이 판매된 상품: ");
    for (int i = 0; i < n; i++) {
        if (*(p판매 + i) == max판매) {
            printf("ID %d (판매량 %d) ", i + 1, *(p판매 + i));
        }
    }
    printf("\n");

    // 최소 판매 상품 출력 (여러 개 가능)
    printf("가장 적게 판매된 상품: ");
    for (int i = 0; i < n; i++) {
        if (*(p판매 + i) == min판매) {
            printf("ID %d (판매량 %d) ", i + 1, *(p판매 + i));
        }
    }
    printf("\n");

    // 재고 부족 경고
    for (int i = 0; i < n; i++) {
        if (*(p재고 + i) <= 2) {
            printf("상품 ID %d : 재고부족(%d)\n", i + 1, *(p재고 + i));
        }
    }

    return 0;
}

